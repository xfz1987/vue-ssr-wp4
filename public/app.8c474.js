(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{23:function(t,e,o){"use strict";o.r(e);var n=o(6),a=o(12),i=o(1),s=o(22),r=o.n(s),d=o(0),c=Object(d.a)(null,function(){return this.$createElement,this._self._c,this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"main-header"},[e("h1",[this._v("vue-ssr-todolist")])])}],!1,function(t){o(48)},"data-v-d0fe6d2c",null).exports,l=(o(47),{data:()=>({author:"Xfz"}),render(){const t=arguments[0];return t("div",{class:"footer"},[t("span",["Writen by ",this.author])])}}),u=Object(d.a)(null,function(){return this.$createElement,this._self._c,this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner"},[e("div",{staticClass:"dot1"}),this._v(" "),e("div",{staticClass:"dot2"})])}],!1,function(t){o(46)},"data-v-5d4d3cac",null).exports,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},h={metaInfo:{title:"xfz's Todo App"},components:{Header:c,Footer:l,Loading:u},mounted(){this.updateCountSync({time:2e3,num:5}),this.updateCount(3)},computed:p({},Object(i.e)(["count","loading"]),Object(i.c)(["fullname"])),methods:p({},Object(i.b)(["updateCountSync"]),Object(i.d)(["updateCount"]),{testNotify(){this.$notify({content:"test notify",btn:"close"})}})},m=Object(d.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"cover"}),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],attrs:{id:"loading"}},[e("Loading")],1),this._v(" "),e("Header"),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1),this._v(" "),e("Footer")],1)},[],!1,function(t){o(49)},"data-v-af6d6604",null).exports,v=[{path:"/",redirect:"/app"},{path:"/app",component:()=>o.e("todo-view").then(o.bind(null,5)),title:"my todolist",description:"this is a todolist vue-ssr"},{path:"/login",component:()=>o.e("login-view").then(o.bind(null,4)),title:"登陆",description:"this is a login vue-ssr"},{path:"/test",props:t=>({id:t.query.id}),component:()=>o.e(0).then(o.bind(null,3))}],f={count:0,firstname:"Zi",lastname:"Xiaofeng",todos:[],user:null,loading:!1},g={updateCount(t,e){t.count=e},fillTodos(t,e){t.todos=e},addTodo(t,e){t.todos.unshift(e)},updateTodo(t,{id:e,todo:o}){t.todos.splice(t.todos.findIndex(t=>t.id===e),1,o)},deleteTodo(t,e){t.todos.splice(t.todos.findIndex(t=>t.id===e),1)},deleteAllCompleted(t){t.todos=t.todos.filter(t=>!t.completed)},doLogin(t,e){t.user=e},startLoading(t){t.loading=!0},endLoading(t){t.loading=!1}},b={fullname:t=>`${t.firstname} ${t.lastname}`},y=o(21);const _=(t,e)=>{const o=new Error(e);return o.code=t,o},C=o.n(y).a.create({baseURL:"/"}),$=t=>new Promise((e,o)=>{t.then(t=>{console.log(t);const n=t.data;return n?n.success?void e(n.data):o(_(400,n.message)):o(_(400,"no data"))}).catch(t=>{const e=t.response;console.log("---------------",e),401===e.status&&o(_(401,"need auth"))})});var T=()=>$(C.get("/api/todos")),w=(t,e)=>$(C.post("/user/login",{username:t,password:e})),L=(t,e)=>$(C.put(`/api/todo/${t}`,e)),x=t=>$(C.post("/api/todo",t)),O=t=>$(C.delete(`/api/todo/${t}`)),j=t=>$(C.post("/api/delete/completed",{ids:t})),E={name:"Notification",data:()=>({visible:!0}),props:{content:{type:String,required:!0},btn:{type:String,default:"关闭"}},computed:{style:()=>({})},methods:{handleClose(t){t.preventDefault(),this.$emit("close")},afterLeave(){this.$emit("closed")},afterEnter(){},clearTimer(){},createTimer(){}}},S=Object(d.a)(E,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"},on:{"after-leave":t.afterLeave,"after-enter":t.afterEnter}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"notification",style:t.style,on:{mouseenter:t.clearTimer,mouseleave:t.createTimer}},[o("span",{staticClass:"content"},[t._v(t._s(t.content))]),t._v(" "),o("a",{staticClass:"btn",on:{click:t.handleClose}},[t._v(t._s(t.btn))])])])},[],!1,function(t){o(27)},"data-v-f56ecd2e",null).exports,A={extends:S,data:()=>({verticalOffset:0,autoClose:3e3,height:0,visible:!1}),computed:{style(){return{position:"fixed",right:"20px",bottom:`${this.verticalOffset}px`}}},mounted(){this.createTimer()},methods:{createTimer(){this.autoClose&&(this.timer=setTimeout(()=>{this.visible=!1},this.autoClose))},clearTimer(){this.timer&&clearTimeout(this.timer)},afterEnter(){this.height=this.$el.offsetHeight}},beforeDestory(){this.clearTimer()}},I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};const k=n.a.extend(A),N=[];let q=1;var P=t=>{if(n.a.prototype.$isServer)return;const{autoClose:e}=t,o=function(t,e){var o={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o}(t,["autoClose"]),a=new k({propsData:I({},o),data:{autoClose:void 0===e?3e3:e}}),i=`notification_${q++}`;a.id=i,a.vm=a.$mount(),document.body.appendChild(a.vm.$el),a.visible=!0;let s=0;return N.forEach(t=>{s+=t.$el.offsetHeight+16}),s+=16,a.verticalOffset=s,N.push(a),a.vm.$on("closed",()=>{(t=>{if(!t)return;const e=N.length,o=N.findIndex(e=>t.id===e.id);if(N.splice(o,1),e<1)return;const n=t.vm.height;for(let t=o;t<e-1;t++)N[t].verticalOffset=parseInt(N[t].verticalOffset)-n-16})(a),document.body.removeChild(a.vm.$el),a.vm.$destroy()}),a.vm.$on("close",()=>{a.vm.visible=!1}),a.vm},H=new n.a;const D=t=>{401===t.code&&(P({content:"please login！"}),H.$emit("auth"))};var z={updateCountSync(t,e){setTimeout(()=>{t.commit("updateCount",e.num)},e.time)},fetchTodos:({commit:t})=>(t("startLoading"),T().then(e=>{t("endLoading"),t("fillTodos",e)}).catch(e=>{t("endLoading"),D(e)})),addTodo({commit:t},e){t("startLoading"),x(e).then(e=>{t("addTodo",e),t("endLoading"),P({content:"你又多了一件事要做"})}).catch(e=>{D(e),t("endLoading")})},updateTodo({commit:t},{id:e,todo:o}){t("startLoading"),L(e,o).then(o=>{t("updateTodo",{id:e,todo:o}),t("endLoading")}).catch(e=>{D(e),t("endLoading")})},deleteTodo({commit:t},e){t("startLoading"),O(e).then(o=>{t("deleteTodo",e),t("endLoading"),P({content:"你又少了一件事要做"})}).catch(e=>{D(e),t("endLoading")})},deleteAllCompleted({commit:t,state:e}){t("startLoading");const o=e.todos.filter(t=>t.completed).map(t=>t.id);j(o).then(()=>{t("deleteAllCompleted"),t("endLoading"),P({content:"清理一下~~~"})}).catch(e=>{D(e),t("endLoading")})},login:({commit:t},{username:e,password:o})=>(t("startLoading"),new Promise((n,a)=>{w(e,o).then(e=>{t("doLogin",e),P({content:"登陆成功"}),n(),t("endLoading")}).catch(e=>{D(e),a(e),t("endLoading")})}))},F={props:{panes:{type:Array,required:!0}},render(){return(0,arguments[0])("div",{class:"tab-content"},[this.panes.map(t=>t.active?t.$slots.default:null)])}},J={name:"Tabs",components:{TabContainer:Object(d.a)(F,void 0,void 0,!1,null,null,null).exports},props:{value:{type:[String,Number],required:!0}},data:()=>({panes:[]}),render(){const t=arguments[0];return t("div",{class:"tabs"},[t("ul",{class:"tabs-header"},[this.$slots.default]),t("tab-container",{attrs:{panes:this.panes}})])},methods:{onChange(t){this.$emit("change",t)}}},R=Object(d.a)(J,void 0,void 0,!1,function(t){o(26)},"data-v-7aaf186a",null).exports,X={name:"Tab",props:{index:{type:[Number,String],required:!0},label:{type:String,default:"tab"}},computed:{active(){return this.$parent.value===this.index}},mounted(){this.$parent.panes.push(this)},methods:{handleClick(){this.$parent.onChange(this.index)}},render(){const t=arguments[0],e=this.$slots.label||t("span",[this.label]);return t("li",{class:{tab:!0,active:this.active},on:{click:this.handleClick}},[e])}},B=Object(d.a)(X,void 0,void 0,!1,function(t){o(25)},"data-v-e796360e",null).exports;o(24),n.a.use(a.a),n.a.use(i.a),n.a.use(r.a),n.a.use(t=>{t.component(S.name,S),t.prototype.$notify=P}),n.a.use(t=>{t.component(R.name,R),t.component(B.name,B)});const{app:U,router:W,store:Z}=(()=>{const t=(()=>new a.a({routes:v,mode:"history",linkActiveClass:"active-class",linkExactActiveClass:"exact-active-class",scrollBehavior:(t,e,o)=>o||{x:0,y:0},fallback:!0}))(),e=(()=>new i.a.Store({strict:!1,state:f,mutations:g,getters:b,actions:z}))();return{app:new n.a({router:t,store:e,render:t=>t(m)}),router:t,store:e}})();window.__INITIAL_STATE__&&Z.replaceState(window.__INITIAL_STATE__),H.$on("auth",()=>{W.replace("/login")}),W.onReady(()=>{U.$mount("#app")})},24:function(t,e){},25:function(t,e){},26:function(t,e){},27:function(t,e){},46:function(t,e){},47:function(t,e){},48:function(t,e){},49:function(t,e){}},[[23,"runtime~app","vendors~app"]]]);